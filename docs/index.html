<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ‘</text></svg>" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lunar Impact Simulator</title>
  <!-- Google Maps JS API â€” replace YOUR_API_KEY with your Maps Platform key.
       The "places" library powers the Autocomplete search box.            -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDGGUK5b09T90xyhqSaPfo5_5OCVMIGqso&libraries=places&loading=async"
    async defer></script>
  <script type="module" crossorigin src="/Lunar/assets/index-BcAYO0Ls.js"></script>
  <link rel="stylesheet" crossorigin href="/Lunar/assets/index-CNURfbf7.css">
</head>

<body>
  <div id="app"></div>

  <!-- Earth View Container -->
  <div id="earth-container">
    <!-- 3D Tiles render directly into the main Three.js canvas;
         this container holds the search bar and Earth-mode HUD only. -->

    <!-- Search bar -->
    <div id="earth-search-bar">
      <div id="earth-search-wrap">
        <svg id="earth-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
        <input id="earth-search" type="text" placeholder="Search city or addressâ€¦ (e.g. Phoenix, AZ)"
          autocomplete="off" />
        <button id="earth-search-clear" title="Clear">âœ•</button>
      </div>
    </div>

    <!-- Target location confirmation strip -->
    <div id="earth-target-strip" class="hidden">
      <span id="earth-target-icon">ðŸŽ¯</span>
      <span id="earth-target-name">â€”</span>
      <span id="earth-target-coords"></span>
    </div>

    <div id="earth-loading">Loading Earth Terrainâ€¦</div>
    <button id="btn-return-moon">RETURN TO MOON</button>
  </div>

  <!-- Countdown Overlay -->
  <div id="countdown-box">
    <p class="countdown-label">IMPACT IN</p>
    <p class="countdown-value"><span id="time-val">0.00</span> s</p>
  </div>

  <div id="ui-container">
    <h1>LUNAR IMPACT</h1>
    <div class="impact-dashboard">
      <div class="dash-row top-row">
        <div class="dash-item highlight">
          <div class="dash-label">Impact Energy</div>
          <div class="dash-value highlight-val"><span id="energy">0</span> <span class="unit">Joules</span></div>
          <div class="dash-tnt" id="energy-tnt"></div>
        </div>
      </div>
      <div class="dash-row">
        <div class="dash-item">
          <svg class="dash-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 12h20M6 8l-4 4 4 4M18 8l4 4-4 4" />
          </svg>
          <div class="dash-text">
            <div class="dash-label">Diameter</div>
            <div class="dash-value"><span id="diameter">0</span> <span class="unit">km</span></div>
          </div>
        </div>
        <div class="dash-item">
          <svg class="dash-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 4v16M8 16l4 4 4-4" />
          </svg>
          <div class="dash-text">
            <div class="dash-label">Depth</div>
            <div class="dash-value"><span id="depth">0</span> <span class="unit">km</span></div>
          </div>
        </div>
      </div>
      <div class="dash-row shape-row">
        <div class="dash-item shape-item">
          <svg class="dash-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
          </svg>
          <div class="dash-text">
            <div class="dash-label">Crater Morphology</div>
            <div class="dash-value" id="crater-shape">Waiting...</div>
          </div>
        </div>
        <div class="profile-canvas-wrap">
          <canvas id="craterProfile" width="300" height="80"></canvas>
        </div>
      </div>
    </div>
    <div class="controls-info">
      <p>Controls: Drag to rotate | Scroll to zoom | Right-click to pan</p>
    </div>
    <div class="chart-toolbar">
      <select id="chart-selector">
        <option value="energy">Impact Energy</option>
        <option value="crater-dia">Mass vs Crater Dia</option>
        <option value="vel-dia">Velocity vs Crater Dia</option>
      </select>
      <button id="btn-toggle-curve">SHOW CURVE</button>
    </div>
    <div id="chart-container">
      <div id="chart-placeholder">ðŸš€ Fire a projectile to see impact data</div>
      <canvas id="impactChart"></canvas>
    </div>
  </div>

  <div id="ui-controls">
    <div class="control-group">
      <label>Type</label>
      <select id="inp-density" class="select-css">
        <option value="1000">Ice/Comet (~1000 kg/mÂ³)</option>
        <option value="3000" selected>Rock/Asteroid (~3000 kg/mÂ³)</option>
        <option value="8000">Iron (~8000 kg/mÂ³)</option>
      </select>
    </div>
    <div class="control-group">
      <label>Velocity <span id="val-velocity" class="value-display">10 km/s</span></label>
      <input type="range" id="inp-velocity" min="5" max="80" value="10" step="1">
    </div>
    <div class="control-group">
      <label>Mass (Exp) <span id="val-mass" class="value-display">1e8 kg</span></label>
      <input type="range" id="inp-mass" min="8" max="15" value="8" step="0.1">
    </div>
    <div class="control-group">
      <label>Angle <span id="val-angle" class="value-display">90 deg</span></label>
      <input type="range" id="inp-angle" min="5" max="90" value="90">
    </div>
    <button id="fire-btn" class="pulsing">FIRE PROJECTILE</button>
    <button id="reset-btn">RESET SIMULATION</button>
  </div>

</body>

</html>